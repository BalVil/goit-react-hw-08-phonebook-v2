"use strict";(self.webpackChunkgoit_react_hw_08_phonebook_v2=self.webpackChunkgoit_react_hw_08_phonebook_v2||[]).push([[65],{3065:function(n,e,t){t.r(e),t.d(e,{default:function(){return hn}});var r,o,i,a=t(1413),s=t(5987),d=t(5290),c=t(6151),l=t(4708),u=t(6403),m=t(1889),f=t(4554),x=t(168),h=t(5899),b=t(2430),g=t(7847),p=b.Z.div(r||(r=(0,x.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),v=(0,g.F4)(o||(o=(0,x.Z)(["\n0% {\n  transform: rotate(0deg);\n}\n100% {\n  transform: rotate(1turn);\n}\n"]))),Z=(0,b.Z)(h.frZ)(i||(i=(0,x.Z)(["\n  animation: "," 0.85s linear infinite;\n"])),v);Z.defaultProps={size:40};var j,w,C,y,k,L,S,P,I,_,q=t(184),z=function(n){var e=n.size;return(0,q.jsx)(p,{children:(0,q.jsx)(Z,{size:e})})},A=t(2791),E=t(9434),F=t(1538),T=function(n){return n.contacts.items},K=function(n){return n.contacts.isLoading},N=function(n){return n.contacts.error},W=t(7576),D=["ref"],R=["ref"],V=function(){var n=function(){var n=(0,E.v9)(T),e=(0,E.v9)(K),t=(0,E.I0)(),r=(0,d.cI)({defaultValues:{name:"",number:""}}),o=r.register,i=r.handleSubmit,a=r.formState.errors,s=r.reset,c=r.control;return(0,A.useEffect)((function(){"addSuccess"===e&&((0,W.s$)("Contact added"),s(),t(F.r.setIsLoading()))}),[t,e,s]),{register:o,errors:a,control:c,isLoading:e,handleSubmit:i,handleAddContact:function(e){-1!==n.findIndex((function(n){return n.name.toLowerCase()===e.name.toLowerCase()}))?(0,W.K2)("".concat(e.name," is already in contacts ")):t(F.r.addContact(e))},contactValidation:{name:{required:"Name is required",maxLength:50,pattern:{value:/^[a-zA-Z\u0430-\u044f\u0410-\u042f0-9]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f0-9 ])?[a-zA-Z\u0430-\u044f\u0410-\u042f0-9]*)*$/,message:"Invalid name format"}},number:{required:"Number is required",pattern:{value:/^[0-9]+$/,message:"This is not a valid mobile phone"},minLength:{value:6,message:"This number is too short"},maxLength:{value:14,message:"This number is too long"}}}}}(),e=n.register,t=n.errors,r=n.control,o=n.isLoading,i=n.handleSubmit,x=n.handleAddContact,h=n.contactValidation;return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(f.Z,{sx:{padding:4,bgcolor:"#fff",borderRadius:2,boxShadow:"rgb(0 0 0 / 20%) 0px 2px 4px"},children:[(0,q.jsx)(l.ZP,{}),(0,q.jsx)(f.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,q.jsxs)(f.Z,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:i(x),textAlign:"center",children:[(0,q.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,q.jsx)(m.ZP,{item:!0,xs:12,children:(0,q.jsx)(d.Qr,{control:r,name:"name",render:function(n){var r=n.field,o=r.ref,i=(0,s.Z)(r,D);return(0,q.jsx)(u.Z,(0,a.Z)((0,a.Z)((0,a.Z)({},i),{},{inputRef:o,type:"text",name:"name",fullWidth:!0,id:"name",label:"Name",variant:"standard"},e("name",h.name)),{},{error:Boolean(t.name),helperText:(null===t||void 0===t?void 0:t.name)&&t.name.message,required:!0}))}})}),(0,q.jsx)(m.ZP,{item:!0,xs:12,children:(0,q.jsx)(d.Qr,{control:r,name:"number",render:function(n){var r=n.field,o=r.ref,i=(0,s.Z)(r,R);return(0,q.jsx)(u.Z,(0,a.Z)((0,a.Z)((0,a.Z)({},i),{},{inputRef:o,fullWidth:!0,name:"number",label:"Phone",type:"tel",id:"number",variant:"standard"},e("number",h.number)),{},{error:Boolean(t.number),helperText:(null===t||void 0===t?void 0:t.number)&&t.number.message,required:!0}))}})})]}),(0,q.jsx)(c.Z,{type:"submit",variant:"contained",fullWidth:!0,disabled:"add"===o,sx:{mt:3,bgcolor:"#32a5cf"},children:"add"===o?(0,q.jsx)(z,{size:22}):(0,q.jsx)("span",{children:"Add contact"})})]})})]})})},$=b.Z.div(j||(j=(0,x.Z)(["\n  width: 396px;\n  padding: 16px;\n  margin: 0 auto;\n"]))),B=b.Z.section(w||(w=(0,x.Z)(["\n  margin-bottom: 16px;\n  text-align: center;\n"]))),Q=b.Z.h1(C||(C=(0,x.Z)(["\n  margin-bottom: 16px;\n  font-size: 28px;\n"]))),G=t(885),M=t(4919),O=t(3400),Y=t(7247),H=b.Z.li(y||(y=(0,x.Z)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 12px 8px;\n  line-height: 1.4em;\n  border-radius: 4px;\n  box-shadow: rgb(0 0 0 / 20%) 0px 3px 1px -2px,\n    rgb(0 0 0 / 14%) 0px 2px 2px 0px, rgb(0 0 0 / 12%) 0px 1px 5px 0px;\n\n  &:not(:last-child) {\n    margin-bottom: 8px;\n  }\n"]))),J=b.Z.span(k||(k=(0,x.Z)(["\n  max-width: 42%;\n  flex-basis: 42%;\n  margin-right: 10px;\n  font-weight: 600;\n  overflow-wrap: break-word;\n"]))),U=b.Z.span(L||(L=(0,x.Z)(["\n  max-width: 35%;\n  overflow-wrap: break-word;\n"]))),X=t(6960),nn=t(4164),en=b.Z.div(S||(S=(0,x.Z)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.5);\n"]))),tn=t(890),rn=t(4942),on=function(n){var e=function(n){var e=n.id,t=n.onClose,r=(0,E.I0)(),o=(0,E.v9)(T),i=o.find((function(n){return n.id===e})),s=i.name,d=i.number,c=(0,A.useState)({name:s,number:d}),l=(0,G.Z)(c,2),u=l[0],m=l[1],f=o.reduce((function(n,t){return t.id===e&&(n=t.name),n}),{});return{inputs:u,handleSubmit:function(n){n.preventDefault(),-1!==o.findIndex((function(n){return n.name.toLowerCase()===u.name.toLowerCase()}))&&f!==u.name?(0,W.K2)("".concat(u.name," is already in contacts ")):((u.name.trim()!==s||u.number!==d)&&r(F.r.editContact((0,a.Z)({id:e},u))),t())},handleChange:function(n){var e=n.target.name,t=n.target.value;m((function(n){return(0,a.Z)((0,a.Z)({},n),{},(0,rn.Z)({},e,t))}))}}}({id:n.id,onClose:n.onClose}),t=e.inputs,r=e.handleSubmit,o=e.handleChange;return(0,q.jsxs)(f.Z,{padding:{xs:3},sx:{bgcolor:"#fff",borderRadius:2,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[(0,q.jsx)(tn.Z,{component:"h2",variant:"h6",sx:{textAlign:"center",marginBottom:2},children:"Edit contact"}),(0,q.jsxs)(f.Z,{component:"form",textAlign:"center",onSubmit:r,children:[(0,q.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,q.jsx)(m.ZP,{item:!0,xs:12,children:(0,q.jsx)(u.Z,{required:!0,type:"text",fullWidth:!0,id:"name",label:"Name",name:"name",onChange:o,value:t.name,variant:"standard"})}),(0,q.jsx)(m.ZP,{item:!0,xs:12,children:(0,q.jsx)(u.Z,{required:!0,type:"tel",fullWidth:!0,id:"number",label:"Number",name:"number",onChange:o,value:t.number,variant:"standard",onKeyPress:function(n){return!/[0-9]/.test(n.key)&&n.preventDefault()}})})]}),(0,q.jsx)(c.Z,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:3,bgcolor:"#32a5cf"},children:"Confirm"})]})]})},an=function(n){var e=n.onClose,t=n.id;(0,A.useEffect)((function(){var n=function(n){"Escape"===n.code&&e()};return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}),[e]);return(0,nn.createPortal)((0,q.jsx)(en,{onClick:function(n){n.target===n.currentTarget&&e()},children:(0,q.jsx)(on,{id:t,onClose:e})}),document.querySelector("#modal-root"))},sn=function(n){var e=n.id,t=n.name,r=n.number,o=(0,E.I0)(),i=(0,E.v9)(K),a=(0,A.useState)(!1),s=(0,G.Z)(a,2),d=s[0],c=s[1],l=function(){return c((function(n){return!n}))};return(0,A.useEffect)((function(){return function(){i===e&&((0,W.K2)("You have removed ".concat(t," from your list ")),o(F.r.setIsLoading()))}}),[o,e,i,t]),(0,q.jsxs)(H,{children:[(0,q.jsxs)(J,{children:[t,":"]}),(0,q.jsx)(U,{children:r}),(0,q.jsx)(O.Z,{sx:{position:"absolute",right:"15%","&:hover, &:focus":{bgcolor:"#d7f0d0",color:"#468d46"}},"aria-label":"edit",type:"button",onClick:l,children:(0,q.jsx)(M.Z,{})}),(0,q.jsx)(O.Z,{sx:{position:"absolute",right:"2%","&:hover, &:focus":{bgcolor:"#f3dacf",color:"#d31616"}},"aria-label":"delete",type:"button",disabled:i===e,loading:i===e?1:0,onClick:function(){return n=e,void o(X.GK(n));var n},children:(0,q.jsx)(Y.Z,{})}),d&&(0,q.jsx)(an,{onClose:l,id:e})]})},dn=t(3628),cn=b.Z.label(P||(P=(0,x.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 16px;\n  margin-bottom: 16px;\n"]))),ln=b.Z.p(I||(I=(0,x.Z)(["\n  margin-bottom: 2px;\n  color: rgba(0, 0, 0, 0.54);\n"]))),un=(0,b.Z)(dn.DebounceInput)(_||(_=(0,x.Z)(["\n  display: block;\n  height: calc(2.5rem + 2px);\n  width: 50%;\n  margin-bottom: 8px;\n  padding: 1rem 0.75rem;\n  font-size: 1.1rem;\n  line-height: 1.25;\n  color: #212529;\n  background-clip: padding-box;\n  border: 1px solid #bdbdbd;\n  border-radius: 0.25rem;\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n  appearance: none;\n\n  &:focus {\n    background-color: rgba(0, 0, 0, 0.03);\n    border-color: #bdbdbd;\n    outline: 0;\n    box-shadow: 0 0 0 0.1rem rgba(158, 158, 158, 0.25);\n  }\n"]))),mn=function(n){var e=n.value,t=n.onChange;return(0,q.jsxs)(cn,{children:[(0,q.jsx)(ln,{children:"Find contacts by name"}),(0,q.jsx)(un,{debounceTimeout:300,type:"text",value:e,onChange:function(n){return t(n.target.value)},name:"filter"})]})},fn=t(3478),xn=function(){var n=function(){var n=(0,A.useState)(""),e=(0,G.Z)(n,2),t=e[0],r=e[1],o=(0,E.v9)(T),i=(0,E.I0)(),a=(0,E.v9)(K),s=(0,E.v9)(N);return(0,A.useEffect)((function(){i(X.K2())}),[i]),(0,A.useEffect)((function(){"editSuccess"===a&&((0,W.s$)("Successfully changed"),i(F.r.setIsLoading())),s&&(0,W.x2)("Oops, something went wrong. Please try again")}),[i,a,s]),{FilteredContacts:(0,A.useMemo)((function(){var n=t.toLowerCase().trim();return o.filter((function(e){return e.name.toLowerCase().includes(n)}))}),[t,o]),filter:t,setFilter:r}}(),e=n.FilteredContacts,t=n.filter,r=n.setFilter,o=(0,E.v9)(K),i=0===e.length&&"fetch"!==o;return(0,q.jsxs)(q.Fragment,{children:["fetch"===o?(0,q.jsx)(fn.u3,{}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(mn,{value:t,onChange:r}),(0,q.jsx)("ul",{children:e.length>0&&e.map((function(n){var e=n.id,t=n.name,r=n.number;return(0,q.jsx)(sn,{name:t,number:r,id:e},e)}))})]}),i&&(0,q.jsx)(W.P_,{status:"warning",children:"No contacts found"})]})},hn=function(){return(0,q.jsxs)($,{children:[(0,q.jsxs)(B,{children:[(0,q.jsx)(Q,{children:"Phonebook"}),(0,q.jsx)(V,{})]}),(0,q.jsxs)(B,{children:[(0,q.jsx)("h2",{children:"Contacts"}),(0,q.jsx)(xn,{})]})]})}}}]);
//# sourceMappingURL=65.b6f524a2.chunk.js.map