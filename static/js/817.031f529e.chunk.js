"use strict";(self.webpackChunkbalvil_contactbook=self.webpackChunkbalvil_contactbook||[]).push([[817],{2817:function(n,e,r){r.r(e),r.d(e,{default:function(){return Sn}});var t,o,a,i=r(1413),d=r(5987),s=r(5290),l=r(6151),c=r(4708),u=r(6403),m=r(1889),x=r(4554),p={required:"Name is required",maxLength:50,pattern:{value:/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f0-9 ])?[a-zA-Z\u0430-\u044f\u0410-\u042f0-9]*)*$/,message:"Invalid name format"}},f={required:"Number is required",pattern:{value:/^(\+\d\s*)?(\d{3,4}|\(\d{3,4}\))[-\s]?\d{3}[-\s]?\d{4}$/,message:"This is not a valid mobile phone"},minLength:{value:10,message:"This number is too short"},maxLength:{value:18,message:"This number is too long"}},b=r(168),h=r(5899),g=r(2430),Z=r(7847),v=g.Z.div(t||(t=(0,b.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),j=(0,Z.F4)(o||(o=(0,b.Z)(["\n0% {\n  transform: rotate(0deg);\n}\n100% {\n  transform: rotate(1turn);\n}\n"]))),w=(0,g.Z)(h.frZ)(a||(a=(0,b.Z)(["\n  animation: "," 0.85s linear infinite;\n"])),j);w.defaultProps={size:40};var C,y,k,L,S,P,I,z,A,q,E,F,T,N,W,K,R,$=r(184),B=function(n){var e=n.size;return(0,$.jsx)(v,{children:(0,$.jsx)(w,{size:e})})},D=r(2791),Y=r(9434),_=r(1538),Q=function(n){return n.contacts.items},V=function(n){return n.contacts.isLoading},X=function(n){return n.contacts.error},G=r(7576),M=g.Z.section(C||(C=(0,b.Z)(["\n  margin-top: 48px;\n  text-align: center;\n\n  @media screen and (min-width: 720px) {\n    margin-top: 80px;\n  }\n"]))),O=g.Z.h1(y||(y=(0,b.Z)(["\n  margin-bottom: 24px;\n  font-size: 36px;\n"]))),H=g.Z.div(k||(k=(0,b.Z)(["\n  max-width: 380px;\n  margin: 0 auto;\n  padding: 0 12px;\n\n  @media screen and (min-width: 450px) {\n    max-width: 420px;\n  }\n"]))),J=(g.Z.form(L||(L=(0,b.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px 8px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-shadow: rgba(0, 0, 0, 0.2) 0px 2px 3px;\n"]))),g.Z.div(S||(S=(0,b.Z)(["\n  position: relative;\n  margin-bottom: 1rem;\n"]))),g.Z.label(P||(P=(0,b.Z)(["\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  margin-bottom: 0.25rem;\n  padding: 1rem 0.75rem;\n  color: rgba(0, 0, 0, 0.5);\n  pointer-events: none;\n  border: 1px solid transparent;\n  transform-origin: 0 0;\n  transition: opacity 0.15s ease-in-out, transform 0.15s ease-in-out;\n"])))),U=(g.Z.input(I||(I=(0,b.Z)(["\n  display: block;\n  height: calc(3.5rem + 2px);\n  width: 100%;\n  margin-bottom: 8px;\n  padding: 1rem 0.75rem;\n  line-height: 1.25;\n  color: #212529;\n  background-clip: padding-box;\n  border: 1px solid #bdbdbd;\n  border-radius: 0.25rem;\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n  appearance: none;\n\n  &::placeholder {\n    color: transparent;\n  }\n\n  &:focus {\n    color: #212529;\n    background-color: rgba(0, 0, 0, 0.03);\n    border-color: #bdbdbd;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(158, 158, 158, 0.25);\n\n    padding-top: 1.625rem;\n    padding-bottom: 0.625rem;\n  }\n\n  &:not(:placeholder-shown) {\n    padding-top: 1.625rem;\n    padding-bottom: 0.625rem;\n  }\n\n  &:focus + "," {\n    opacity: 0.75;\n    transform: scale(0.85) translateY(-0.75rem) translateX(0.15rem);\n  }\n  &:not(:placeholder-shown) + "," {\n    opacity: 0.75;\n    transform: scale(0.85) translateY(-0.75rem) translateX(0.15rem);\n  }\n"])),J,J),(0,g.Z)(l.Z)(z||(z=(0,b.Z)(["\n  box-shadow: rgb(0 0 0 / 20%) 0px 3px 1px -2px,\n    rgb(0 0 0 / 14%) 0px 2px 2px 0px, rgb(0 0 0 / 12%) 0px 1px 5px 0px;\n\n  &:focus {\n    outline: 1px solid #1e90ff;\n  }\n  &:active {\n    outline: none;\n    background-color: #1e90ff;\n  }\n"]))),["ref"]),nn=["ref"],en=function(){var n=function(){var n=(0,Y.v9)(Q),e=(0,Y.v9)(V),r=(0,Y.I0)(),t=(0,s.cI)({defaultValues:{name:"",number:""}}),o=t.register,a=t.handleSubmit,i=t.formState.errors,d=t.reset,l=t.control;return(0,D.useEffect)((function(){"addSuccess"===e&&((0,G.s$)("Contact added"),d(),r(_.r.setIsLoading()))}),[r,e,d]),{register:o,errors:i,control:l,isLoading:e,handleSubmit:a,handleAddContact:function(e){-1!==n.findIndex((function(n){return n.name.toLowerCase()===e.name.toLowerCase()}))?(0,G.K2)("".concat(e.name," is already in contacts ")):r(_.r.addContact(e))}}}(),e=n.register,r=n.errors,t=n.control,o=n.isLoading,a=n.handleSubmit,b=n.handleAddContact;return(0,$.jsxs)(M,{children:[(0,$.jsx)(O,{children:"Phonebook"}),(0,$.jsx)(H,{children:(0,$.jsxs)(x.Z,{sx:{padding:4,bgcolor:"#fff",borderRadius:2,boxShadow:"rgb(0 0 0 / 20%) 0px 2px 4px"},children:[(0,$.jsx)(c.ZP,{}),(0,$.jsx)(x.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,$.jsxs)(x.Z,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:a(b),textAlign:"center",children:[(0,$.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,$.jsx)(m.ZP,{item:!0,xs:12,children:(0,$.jsx)(s.Qr,{control:t,name:"name",render:function(n){var t=n.field,o=t.ref,a=(0,d.Z)(t,U);return(0,$.jsx)(u.Z,(0,i.Z)((0,i.Z)((0,i.Z)({},a),{},{inputRef:o,type:"text",name:"name",fullWidth:!0,id:"name",label:"Name",variant:"standard"},e("name",p)),{},{error:Boolean(r.name),helperText:(null===r||void 0===r?void 0:r.name)&&r.name.message,required:!0}))}})}),(0,$.jsx)(m.ZP,{item:!0,xs:12,children:(0,$.jsx)(s.Qr,{control:t,name:"number",render:function(n){var t=n.field,o=t.ref,a=(0,d.Z)(t,nn);return(0,$.jsx)(u.Z,(0,i.Z)((0,i.Z)((0,i.Z)({},a),{},{inputRef:o,fullWidth:!0,name:"number",label:"Phone",type:"tel",id:"number",variant:"standard"},e("number",f)),{},{error:Boolean(r.number),helperText:(null===r||void 0===r?void 0:r.number)&&r.number.message,required:!0}))}})})]}),(0,$.jsx)(l.Z,{type:"submit",variant:"contained",fullWidth:!0,disabled:"add"===o,sx:{mt:5,bgcolor:"#32a5cf"},children:"add"===o?(0,$.jsx)(B,{size:22}):(0,$.jsx)("span",{children:"Add contact"})})]})})]})})]})},rn=r(885),tn=r(4919),on=r(3400),an=r(7247),dn=g.Z.li(A||(A=(0,b.Z)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  margin-bottom: 8px;\n  padding: 12px 8px;\n  line-height: 1.4em;\n  border-radius: 4px;\n  box-shadow: rgb(0 0 0 / 20%) 0px 3px 1px -2px,\n    rgb(0 0 0 / 14%) 0px 2px 2px 0px, rgb(0 0 0 / 12%) 0px 1px 5px 0px;\n"]))),sn=g.Z.span(q||(q=(0,b.Z)(["\n  flex-basis: 50%;\n  font-weight: 500;\n  overflow-wrap: break-word;\n"]))),ln=g.Z.span(E||(E=(0,b.Z)(["\n  max-width: 35%;\n  overflow-wrap: break-word;\n"]))),cn=r(6960),un=r(4164),mn=g.Z.div(F||(F=(0,b.Z)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.5);\n"]))),xn=r(890),pn=r(4942),fn=function(n){var e=function(n){var e=n.id,r=n.onClose,t=(0,Y.I0)(),o=(0,Y.v9)(Q),a=o.find((function(n){return n.id===e})),d=a.name,s=a.number,l=(0,D.useState)({name:d,number:s}),c=(0,rn.Z)(l,2),u=c[0],m=c[1],x=o.reduce((function(n,r){return r.id===e&&(n=r.name),n}),{});return{inputs:u,handleSubmit:function(n){n.preventDefault(),-1!==o.findIndex((function(n){return n.name.toLowerCase()===u.name.toLowerCase()}))&&x!==u.name?(0,G.K2)("".concat(u.name," is already in contacts ")):((u.name.trim()!==d||u.number!==s)&&t(_.r.editContact((0,i.Z)({id:e},u))),r())},handleChange:function(n){var e=n.target.name,r=n.target.value;m((function(n){return(0,i.Z)((0,i.Z)({},n),{},(0,pn.Z)({},e,r))}))}}}({id:n.id,onClose:n.onClose}),r=e.inputs,t=e.handleSubmit,o=e.handleChange;return(0,$.jsxs)(x.Z,{padding:{xs:3},sx:{bgcolor:"#fff",borderRadius:2,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[(0,$.jsx)(xn.Z,{component:"h2",variant:"h6",sx:{textAlign:"center",marginBottom:2},children:"Edit contact"}),(0,$.jsxs)(x.Z,{component:"form",textAlign:"center",onSubmit:t,children:[(0,$.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,$.jsx)(m.ZP,{item:!0,xs:12,children:(0,$.jsx)(u.Z,{required:!0,type:"text",fullWidth:!0,id:"name",label:"Name",name:"name",onChange:o,value:r.name,variant:"standard",inputProps:{pattern:"[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f0-9 ])?[a-zA-Z\u0430-\u044f\u0410-\u042f0-9]*)*"}})}),(0,$.jsx)(m.ZP,{item:!0,xs:12,children:(0,$.jsx)(u.Z,{required:!0,type:"tel",fullWidth:!0,id:"number",label:"Number",name:"number",onChange:o,value:r.number,variant:"standard",inputProps:{pattern:"(\\+\\d)?(\\d{3,4}|\\(\\d{3,4}\\))[-\\s]?\\d{3}[-\\s]?\\d{4}"}})})]}),(0,$.jsx)(l.Z,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:3,bgcolor:"#32a5cf"},children:"Confirm"})]})]})},bn=function(n){var e=n.onClose,r=n.id;(0,D.useEffect)((function(){var n=function(n){"Escape"===n.code&&e()};return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}),[e]);return(0,un.createPortal)((0,$.jsx)(mn,{onClick:function(n){n.target===n.currentTarget&&e()},children:(0,$.jsx)(fn,{id:r,onClose:e})}),document.querySelector("#modal-root"))},hn=function(n){var e=n.id,r=n.name,t=n.number,o=(0,Y.I0)(),a=(0,Y.v9)(V),i=(0,D.useState)(!1),d=(0,rn.Z)(i,2),s=d[0],l=d[1],c=function(){return l((function(n){return!n}))};return(0,D.useEffect)((function(){return function(){a===e&&((0,G.K2)("You have removed ".concat(r," from your list ")),o(_.r.setIsLoading()))}}),[o,e,a,r]),(0,$.jsxs)(dn,{children:[(0,$.jsxs)(sn,{children:[r,":"]}),(0,$.jsx)(ln,{children:t}),(0,$.jsx)(on.Z,{sx:{position:"absolute",right:"15%","&:hover, &:focus":{bgcolor:"#d7f0d0",color:"#468d46"}},"aria-label":"edit",type:"button",onClick:c,children:(0,$.jsx)(tn.Z,{})}),(0,$.jsx)(on.Z,{sx:{position:"absolute",right:"2%","&:hover, &:focus":{bgcolor:"#f3dacf",color:"#d31616"}},"aria-label":"delete",type:"button",disabled:a===e,loading:a===e?1:0,onClick:function(){return n=e,void o(cn.GK(n));var n},children:(0,$.jsx)(an.Z,{})}),s&&(0,$.jsx)(bn,{onClose:c,id:e})]})},gn=r(3628),Zn=g.Z.label(T||(T=(0,b.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 16px;\n  margin-bottom: 16px;\n"]))),vn=g.Z.p(N||(N=(0,b.Z)(["\n  margin-bottom: 2px;\n  color: rgba(0, 0, 0, 0.54);\n"]))),jn=(0,g.Z)(gn.DebounceInput)(W||(W=(0,b.Z)(["\n  display: block;\n  height: calc(2.5rem + 2px);\n  width: 70%;\n  margin-bottom: 8px;\n  padding: 1rem 0.75rem;\n  font-size: 1.1rem;\n  line-height: 1.25;\n  color: #212529;\n  background-clip: padding-box;\n  border: 1px solid #bdbdbd;\n  border-radius: 0.25rem;\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n  appearance: none;\n\n  &:focus {\n    background-color: rgba(0, 0, 0, 0.03);\n    border-color: #bdbdbd;\n    outline: 0;\n    box-shadow: 0 0 0 0.1rem rgba(158, 158, 158, 0.25);\n  }\n"]))),wn=function(n){var e=n.value,r=n.onChange;return(0,$.jsxs)(Zn,{children:[(0,$.jsx)(vn,{children:"Find contacts by name"}),(0,$.jsx)(jn,{debounceTimeout:300,type:"text",value:e,onChange:function(n){return r(n.target.value)},name:"filter"})]})},Cn=r(3478),yn=g.Z.section(K||(K=(0,b.Z)(["\n  margin-top: 48px;\n  text-align: center;\n\n  @media screen and (min-width: 720px) {\n    margin-top: 60px;\n  }\n"]))),kn=g.Z.div(R||(R=(0,b.Z)(["\n  max-width: 380px;\n  margin: 0 auto;\n  padding: 0 12px;\n\n  @media screen and (min-width: 450px) {\n    max-width: 580px;\n    padding: 0 24px;\n  }\n"]))),Ln=function(){var n=function(){var n=(0,D.useState)(""),e=(0,rn.Z)(n,2),r=e[0],t=e[1],o=(0,Y.v9)(Q),a=(0,Y.I0)(),i=(0,Y.v9)(V),d=(0,Y.v9)(X);return(0,D.useEffect)((function(){a(cn.K2())}),[a]),(0,D.useEffect)((function(){"editSuccess"===i&&((0,G.s$)("Successfully changed"),a(_.r.setIsLoading())),d&&(0,G.x2)("Oops, something went wrong. Please try again")}),[a,i,d]),{FilteredContacts:(0,D.useMemo)((function(){var n=r.toLowerCase().trim();return o.filter((function(e){return e.name.toLowerCase().includes(n)}))}),[r,o]),filter:r,setFilter:t}}(),e=n.FilteredContacts,r=n.filter,t=n.setFilter,o=(0,Y.v9)(V),a=0===e.length&&"fetch"!==o;return(0,$.jsxs)(yn,{children:[(0,$.jsx)("h2",{children:"Contacts"}),(0,$.jsxs)(kn,{children:["fetch"===o?(0,$.jsx)(Cn.u3,{}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(wn,{value:r,onChange:t}),(0,$.jsx)("ul",{children:e.length>0&&e.map((function(n){var e=n.id,r=n.name,t=n.number;return(0,$.jsx)(hn,{name:r,number:t,id:e},e)}))})]}),a&&(0,$.jsx)(G.P_,{status:"warning",children:"No contacts found"})]})]})},Sn=function(){return(0,$.jsxs)("div",{children:[(0,$.jsx)(en,{}),(0,$.jsx)(Ln,{})]})}}}]);
//# sourceMappingURL=817.031f529e.chunk.js.map