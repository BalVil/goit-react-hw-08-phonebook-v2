"use strict";(self.webpackChunkbalvil_contactbook=self.webpackChunkbalvil_contactbook||[]).push([[817],{2817:function(n,e,r){r.r(e),r.d(e,{default:function(){return In}});var t,o,a,i=r(1413),d=r(5987),s=r(5290),l=r(6151),c=r(4708),u=r(6403),m=r(1889),x=r(4554),p={required:"Name is required",maxLength:50,pattern:{value:/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f0-9 ])?[a-zA-Z\u0430-\u044f\u0410-\u042f0-9]*)*$/,message:"Invalid name format"}},f={required:"Number is required",pattern:{value:/^(\+\d\s*)?(\d{3,4}|\(\d{3,4}\))[-\s]?\d{3}[-\s]?\d{4}$/,message:"This is not a valid mobile phone"},minLength:{value:5,message:"This number is too short"},maxLength:{value:18,message:"This number is too long"}},b=r(168),h=r(5899),g=r(2430),Z=r(7847),v=g.Z.div(t||(t=(0,b.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),j=(0,Z.F4)(o||(o=(0,b.Z)(["\n0% {\n  transform: rotate(0deg);\n}\n100% {\n  transform: rotate(1turn);\n}\n"]))),w=(0,g.Z)(h.frZ)(a||(a=(0,b.Z)(["\n  animation: "," 0.85s linear infinite;\n"])),j);w.defaultProps={size:40};var C,y,k,L,S,P,I,z,A,q,E,F,T,N,W,K,R,$,B=r(184),D=function(n){var e=n.size;return(0,B.jsx)(v,{children:(0,B.jsx)(w,{size:e})})},Y=r(2791),_=r(9434),Q=r(1538),V=function(n){return n.contacts.items},X=function(n){return n.contacts.isLoading},G=function(n){return n.contacts.error},M=r(7576),O=g.Z.section(C||(C=(0,b.Z)(["\n  margin-top: 48px;\n  text-align: center;\n\n  @media screen and (min-width: 720px) {\n    margin-top: 80px;\n  }\n"]))),H=g.Z.h1(y||(y=(0,b.Z)(["\n  margin-bottom: 24px;\n  font-size: 36px;\n"]))),J=g.Z.div(k||(k=(0,b.Z)(["\n  max-width: 380px;\n  margin: 0 auto;\n  padding: 0 12px;\n\n  @media screen and (min-width: 450px) {\n    max-width: 420px;\n  }\n"]))),U=(g.Z.form(L||(L=(0,b.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px 8px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-shadow: rgba(0, 0, 0, 0.2) 0px 2px 3px;\n"]))),g.Z.div(S||(S=(0,b.Z)(["\n  position: relative;\n  margin-bottom: 1rem;\n"]))),g.Z.label(P||(P=(0,b.Z)(["\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  margin-bottom: 0.25rem;\n  padding: 1rem 0.75rem;\n  color: rgba(0, 0, 0, 0.5);\n  pointer-events: none;\n  border: 1px solid transparent;\n  transform-origin: 0 0;\n  transition: opacity 0.15s ease-in-out, transform 0.15s ease-in-out;\n"])))),nn=(g.Z.input(I||(I=(0,b.Z)(["\n  display: block;\n  height: calc(3.5rem + 2px);\n  width: 100%;\n  margin-bottom: 8px;\n  padding: 1rem 0.75rem;\n  line-height: 1.25;\n  color: #212529;\n  background-clip: padding-box;\n  border: 1px solid #bdbdbd;\n  border-radius: 0.25rem;\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n  appearance: none;\n\n  &::placeholder {\n    color: transparent;\n  }\n\n  &:focus {\n    color: #212529;\n    background-color: rgba(0, 0, 0, 0.03);\n    border-color: #bdbdbd;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(158, 158, 158, 0.25);\n\n    padding-top: 1.625rem;\n    padding-bottom: 0.625rem;\n  }\n\n  &:not(:placeholder-shown) {\n    padding-top: 1.625rem;\n    padding-bottom: 0.625rem;\n  }\n\n  &:focus + "," {\n    opacity: 0.75;\n    transform: scale(0.85) translateY(-0.75rem) translateX(0.15rem);\n  }\n  &:not(:placeholder-shown) + "," {\n    opacity: 0.75;\n    transform: scale(0.85) translateY(-0.75rem) translateX(0.15rem);\n  }\n"])),U,U),(0,g.Z)(l.Z)(z||(z=(0,b.Z)(["\n  box-shadow: rgb(0 0 0 / 20%) 0px 3px 1px -2px,\n    rgb(0 0 0 / 14%) 0px 2px 2px 0px, rgb(0 0 0 / 12%) 0px 1px 5px 0px;\n\n  &:focus {\n    outline: 1px solid #1e90ff;\n  }\n  &:active {\n    outline: none;\n    background-color: #1e90ff;\n  }\n"]))),["ref"]),en=["ref"],rn=function(){var n=function(){var n=(0,_.v9)(V),e=(0,_.v9)(X),r=(0,_.I0)(),t=(0,s.cI)({defaultValues:{name:"",number:""}}),o=t.register,a=t.handleSubmit,i=t.formState.errors,d=t.reset,l=t.control;return(0,Y.useEffect)((function(){"addSuccess"===e&&((0,M.s$)("Contact added"),d(),r(Q.r.setIsLoading()))}),[r,e,d]),{register:o,errors:i,control:l,isLoading:e,handleSubmit:a,handleAddContact:function(e){-1!==n.findIndex((function(n){return n.name.toLowerCase()===e.name.toLowerCase()}))?(0,M.K2)("".concat(e.name," is already in contacts ")):r(Q.r.addContact(e))}}}(),e=n.register,r=n.errors,t=n.control,o=n.isLoading,a=n.handleSubmit,b=n.handleAddContact;return(0,B.jsxs)(O,{children:[(0,B.jsx)(H,{children:"Phonebook"}),(0,B.jsx)(J,{children:(0,B.jsxs)(x.Z,{sx:{padding:4,bgcolor:"#fff",borderRadius:2,boxShadow:"rgb(0 0 0 / 20%) 0px 2px 4px"},children:[(0,B.jsx)(c.ZP,{}),(0,B.jsx)(x.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,B.jsxs)(x.Z,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:a(b),textAlign:"center",children:[(0,B.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,B.jsx)(m.ZP,{item:!0,xs:12,children:(0,B.jsx)(s.Qr,{control:t,name:"name",render:function(n){var t=n.field,o=t.ref,a=(0,d.Z)(t,nn);return(0,B.jsx)(u.Z,(0,i.Z)((0,i.Z)((0,i.Z)({},a),{},{inputRef:o,type:"text",name:"name",fullWidth:!0,id:"name",label:"Name",variant:"standard"},e("name",p)),{},{error:Boolean(r.name),helperText:(null===r||void 0===r?void 0:r.name)&&r.name.message,required:!0}))}})}),(0,B.jsx)(m.ZP,{item:!0,xs:12,children:(0,B.jsx)(s.Qr,{control:t,name:"number",render:function(n){var t=n.field,o=t.ref,a=(0,d.Z)(t,en);return(0,B.jsx)(u.Z,(0,i.Z)((0,i.Z)((0,i.Z)({},a),{},{inputRef:o,fullWidth:!0,name:"number",label:"Phone",type:"tel",id:"number",variant:"standard"},e("number",f)),{},{error:Boolean(r.number),helperText:(null===r||void 0===r?void 0:r.number)&&r.number.message,required:!0}))}})})]}),(0,B.jsx)(l.Z,{type:"submit",variant:"contained",fullWidth:!0,disabled:"add"===o,sx:{mt:5,bgcolor:"#32a5cf"},children:"add"===o?(0,B.jsx)(D,{size:22}):(0,B.jsx)("span",{children:"Add contact"})})]})})]})})]})},tn=r(885),on=r(4919),an=r(3400),dn=r(7247),sn=g.Z.li(A||(A=(0,b.Z)(["\n  position: relative;\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  justify-content: space-around;\n  gap: 8px;\n  margin-bottom: 8px;\n  padding: 12px 8px;\n  line-height: 1.4em;\n  border-radius: 4px;\n  box-shadow: rgb(0 0 0 / 20%) 0px 3px 1px -2px,\n    rgb(0 0 0 / 14%) 0px 2px 2px 0px, rgb(0 0 0 / 12%) 0px 1px 5px 0px;\n"]))),ln=g.Z.span(q||(q=(0,b.Z)(["\n  flex: 1;\n  font-weight: 500;\n  overflow-wrap: break-word;\n\n  @media screen and (max-width: 420px) {\n    flex: 420px;\n  }\n"]))),cn=g.Z.span(E||(E=(0,b.Z)(["\n  flex: 1;\n  overflow-wrap: break-word;\n"]))),un=g.Z.div(F||(F=(0,b.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 6px;\n"]))),mn=r(6960),xn=r(4164),pn=g.Z.div(T||(T=(0,b.Z)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.5);\n"]))),fn=r(890),bn=r(4942),hn=function(n){var e=function(n){var e=n.id,r=n.onClose,t=(0,_.I0)(),o=(0,_.v9)(V),a=o.find((function(n){return n.id===e})),d=a.name,s=a.number,l=(0,Y.useState)({name:d,number:s}),c=(0,tn.Z)(l,2),u=c[0],m=c[1],x=o.reduce((function(n,r){return r.id===e&&(n=r.name),n}),{});return{inputs:u,handleSubmit:function(n){n.preventDefault(),-1!==o.findIndex((function(n){return n.name.toLowerCase()===u.name.toLowerCase()}))&&x!==u.name?(0,M.K2)("".concat(u.name," is already in contacts ")):((u.name.trim()!==d||u.number!==s)&&t(Q.r.editContact((0,i.Z)({id:e},u))),r())},handleChange:function(n){var e=n.target.name,r=n.target.value;m((function(n){return(0,i.Z)((0,i.Z)({},n),{},(0,bn.Z)({},e,r))}))}}}({id:n.id,onClose:n.onClose}),r=e.inputs,t=e.handleSubmit,o=e.handleChange;return(0,B.jsxs)(x.Z,{padding:{xs:3},sx:{bgcolor:"#fff",borderRadius:2,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[(0,B.jsx)(fn.Z,{component:"h2",variant:"h6",sx:{textAlign:"center",marginBottom:2},children:"Edit contact"}),(0,B.jsxs)(x.Z,{component:"form",textAlign:"center",onSubmit:t,children:[(0,B.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,B.jsx)(m.ZP,{item:!0,xs:12,children:(0,B.jsx)(u.Z,{required:!0,type:"text",fullWidth:!0,id:"name",label:"Name",name:"name",onChange:o,value:r.name,variant:"standard",inputProps:{pattern:"[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f0-9 ])?[a-zA-Z\u0430-\u044f\u0410-\u042f0-9]*)*"}})}),(0,B.jsx)(m.ZP,{item:!0,xs:12,children:(0,B.jsx)(u.Z,{required:!0,type:"tel",fullWidth:!0,id:"number",label:"Number",name:"number",onChange:o,value:r.number,variant:"standard",inputProps:{pattern:"(\\+\\d)?(\\d{3,4}|\\(\\d{3,4}\\))[-\\s]?\\d{3}[-\\s]?\\d{4}"}})})]}),(0,B.jsx)(l.Z,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:3,bgcolor:"#32a5cf"},children:"Confirm"})]})]})},gn=function(n){var e=n.onClose,r=n.id;(0,Y.useEffect)((function(){var n=function(n){"Escape"===n.code&&e()};return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}),[e]);return(0,xn.createPortal)((0,B.jsx)(pn,{onClick:function(n){n.target===n.currentTarget&&e()},children:(0,B.jsx)(hn,{id:r,onClose:e})}),document.querySelector("#modal-root"))},Zn=function(n){var e=n.id,r=n.name,t=n.number,o=(0,_.I0)(),a=(0,_.v9)(X),i=(0,Y.useState)(!1),d=(0,tn.Z)(i,2),s=d[0],l=d[1],c=function(){return l((function(n){return!n}))};return(0,Y.useEffect)((function(){return function(){a===e&&((0,M.K2)("You have removed ".concat(r," from your list ")),o(Q.r.setIsLoading()))}}),[o,e,a,r]),(0,B.jsxs)(sn,{children:[(0,B.jsxs)(ln,{children:[r,":"]}),(0,B.jsx)(cn,{children:t}),(0,B.jsxs)(un,{children:[(0,B.jsx)(an.Z,{sx:{"&:hover, &:focus":{bgcolor:"#d7f0d0",color:"#468d46"}},"aria-label":"edit",type:"button",onClick:c,children:(0,B.jsx)(on.Z,{})}),(0,B.jsx)(an.Z,{sx:{"&:hover, &:focus":{bgcolor:"#f3dacf",color:"#d31616"}},"aria-label":"delete",type:"button",disabled:a===e,loading:a===e?1:0,onClick:function(){return n=e,void o(mn.GK(n));var n},children:(0,B.jsx)(dn.Z,{})})]}),s&&(0,B.jsx)(gn,{onClose:c,id:e})]})},vn=r(3628),jn=g.Z.label(N||(N=(0,b.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 16px;\n  margin-bottom: 16px;\n"]))),wn=g.Z.p(W||(W=(0,b.Z)(["\n  margin-bottom: 2px;\n  color: rgba(0, 0, 0, 0.54);\n"]))),Cn=(0,g.Z)(vn.DebounceInput)(K||(K=(0,b.Z)(["\n  display: block;\n  height: calc(2.5rem + 2px);\n  width: 70%;\n  margin-bottom: 8px;\n  padding: 1rem 0.75rem;\n  font-size: 1.1rem;\n  line-height: 1.25;\n  color: #212529;\n  background-clip: padding-box;\n  border: 1px solid #bdbdbd;\n  border-radius: 0.25rem;\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n  appearance: none;\n\n  &:focus {\n    background-color: rgba(0, 0, 0, 0.03);\n    border-color: #bdbdbd;\n    outline: 0;\n    box-shadow: 0 0 0 0.1rem rgba(158, 158, 158, 0.25);\n  }\n"]))),yn=function(n){var e=n.value,r=n.onChange;return(0,B.jsxs)(jn,{children:[(0,B.jsx)(wn,{children:"Find contacts by name"}),(0,B.jsx)(Cn,{debounceTimeout:300,type:"text",value:e,onChange:function(n){return r(n.target.value)},name:"filter"})]})},kn=r(3478),Ln=g.Z.section(R||(R=(0,b.Z)(["\n  margin-top: 48px;\n  text-align: center;\n\n  @media screen and (min-width: 720px) {\n    margin-top: 60px;\n  }\n"]))),Sn=g.Z.div($||($=(0,b.Z)(["\n  max-width: 380px;\n  margin: 0 auto;\n  padding: 0 12px;\n\n  @media screen and (min-width: 450px) {\n    max-width: 580px;\n    padding: 0 24px;\n  }\n"]))),Pn=function(){var n=function(){var n=(0,Y.useState)(""),e=(0,tn.Z)(n,2),r=e[0],t=e[1],o=(0,_.v9)(V),a=(0,_.I0)(),i=(0,_.v9)(X),d=(0,_.v9)(G);return(0,Y.useEffect)((function(){a(mn.K2())}),[a]),(0,Y.useEffect)((function(){"editSuccess"===i&&((0,M.s$)("Successfully changed"),a(Q.r.setIsLoading())),d&&(0,M.x2)("Oops, something went wrong. Please try again")}),[a,i,d]),{FilteredContacts:(0,Y.useMemo)((function(){var n=r.toLowerCase().trim();return o.filter((function(e){return e.name.toLowerCase().includes(n)}))}),[r,o]),filter:r,setFilter:t}}(),e=n.FilteredContacts,r=n.filter,t=n.setFilter,o=(0,_.v9)(X),a=0===e.length&&"fetch"!==o;return(0,B.jsxs)(Ln,{children:[(0,B.jsx)("h2",{children:"Contacts"}),(0,B.jsxs)(Sn,{children:["fetch"===o?(0,B.jsx)(kn.u3,{}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(yn,{value:r,onChange:t}),(0,B.jsx)("ul",{children:e.length>0&&e.map((function(n){var e=n.id,r=n.name,t=n.number;return(0,B.jsx)(Zn,{name:r,number:t,id:e},e)}))})]}),a&&(0,B.jsx)(M.P_,{status:"warning",children:"No contacts found"})]})]})},In=function(){return(0,B.jsxs)("div",{children:[(0,B.jsx)(rn,{}),(0,B.jsx)(Pn,{})]})}}}]);
//# sourceMappingURL=817.b2c534c0.chunk.js.map