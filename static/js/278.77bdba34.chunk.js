"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[278],{8278:function(n,e,r){r.r(e),r.d(e,{default:function(){return kn}});var t,o,a,i,s,d,l,c,u,m,x,p=r(1413),f=r(5987),b=r(1134),h=r(6151),g=r(4708),Z=r(8787),v=r(1889),j=r(4554),w=r(168),C=r(2430),y=C.Z.section(t||(t=(0,w.Z)(["\n  margin-top: 48px;\n  text-align: center;\n\n  @media screen and (min-width: 720px) {\n    margin-top: 80px;\n  }\n"]))),k=C.Z.h1(o||(o=(0,w.Z)(["\n  margin-bottom: 24px;\n  font-size: 36px;\n"]))),L=C.Z.div(a||(a=(0,w.Z)(["\n  max-width: 380px;\n  margin: 0 auto;\n  padding: 0 12px;\n\n  @media screen and (min-width: 450px) {\n    max-width: 420px;\n  }\n"]))),S=(C.Z.form(i||(i=(0,w.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px 8px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-shadow: rgba(0, 0, 0, 0.2) 0px 2px 3px;\n"]))),C.Z.div(s||(s=(0,w.Z)(["\n  position: relative;\n  margin-bottom: 1rem;\n"]))),C.Z.label(d||(d=(0,w.Z)(["\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  margin-bottom: 0.25rem;\n  padding: 1rem 0.75rem;\n  color: rgba(0, 0, 0, 0.5);\n  pointer-events: none;\n  border: 1px solid transparent;\n  transform-origin: 0 0;\n  transition: opacity 0.15s ease-in-out, transform 0.15s ease-in-out;\n"])))),P=(C.Z.input(l||(l=(0,w.Z)(["\n  display: block;\n  height: calc(3.5rem + 2px);\n  width: 100%;\n  margin-bottom: 8px;\n  padding: 1rem 0.75rem;\n  line-height: 1.25;\n  color: #212529;\n  background-clip: padding-box;\n  border: 1px solid #bdbdbd;\n  border-radius: 0.25rem;\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n  appearance: none;\n\n  &::placeholder {\n    color: transparent;\n  }\n\n  &:focus {\n    color: #212529;\n    background-color: rgba(0, 0, 0, 0.03);\n    border-color: #bdbdbd;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(158, 158, 158, 0.25);\n\n    padding-top: 1.625rem;\n    padding-bottom: 0.625rem;\n  }\n\n  &:not(:placeholder-shown) {\n    padding-top: 1.625rem;\n    padding-bottom: 0.625rem;\n  }\n\n  &:focus + "," {\n    opacity: 0.75;\n    transform: scale(0.85) translateY(-0.75rem) translateX(0.15rem);\n  }\n  &:not(:placeholder-shown) + "," {\n    opacity: 0.75;\n    transform: scale(0.85) translateY(-0.75rem) translateX(0.15rem);\n  }\n"])),S,S),(0,C.Z)(h.Z)(c||(c=(0,w.Z)(["\n  box-shadow: rgb(0 0 0 / 20%) 0px 3px 1px -2px,\n    rgb(0 0 0 / 14%) 0px 2px 2px 0px, rgb(0 0 0 / 12%) 0px 1px 5px 0px;\n\n  &:focus {\n    outline: 1px solid #1e90ff;\n  }\n  &:active {\n    outline: none;\n    background-color: #1e90ff;\n  }\n"]))),r(5899)),I=r(7847),q=C.Z.div(u||(u=(0,w.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),z=(0,I.F4)(m||(m=(0,w.Z)(["\n0% {\n  transform: rotate(0deg);\n}\n100% {\n  transform: rotate(1turn);\n}\n"]))),A=(0,C.Z)(P.frZ)(x||(x=(0,w.Z)(["\n  animation: "," 0.85s linear infinite;\n"])),z);A.defaultProps={size:40};var E,F,T,K,N,W,_,D,R,V=r(184),$=function(n){var e=n.size;return(0,V.jsx)(q,{children:(0,V.jsx)(A,{size:e})})},B=r(2791),Y=r(9434),Q=r(1538),X=function(n){return n.contacts.items},G=function(n){return n.contacts.isLoading},M=function(n){return n.contacts.error},O=r(7576),H=["ref"],J=["ref"],U=function(){var n=function(){var n=(0,Y.v9)(X),e=(0,Y.v9)(G),r=(0,Y.I0)(),t=(0,b.cI)({defaultValues:{name:"",number:""}}),o=t.register,a=t.handleSubmit,i=t.formState.errors,s=t.reset,d=t.control;return(0,B.useEffect)((function(){"addSuccess"===e&&((0,O.s$)("Contact added"),s(),r(Q.r.setIsLoading()))}),[r,e,s]),{register:o,errors:i,control:d,isLoading:e,handleSubmit:a,handleAddContact:function(e){-1!==n.findIndex((function(n){return n.name.toLowerCase()===e.name.toLowerCase()}))?(0,O.K2)("".concat(e.name," is already in contacts ")):r(Q.r.addContact(e))},contactValidation:{name:{required:"Name is required",maxLength:50,pattern:{value:/^[a-zA-Z\u0430-\u044f\u0410-\u042f0-9]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f0-9 ])?[a-zA-Z\u0430-\u044f\u0410-\u042f0-9]*)*$/,message:"Invalid name format"}},number:{required:"Number is required",pattern:{value:/^[0-9]+$/,message:"This is not a valid mobile phone"},minLength:{value:6,message:"This number is too short"},maxLength:{value:14,message:"This number is too long"}}}}}(),e=n.register,r=n.errors,t=n.control,o=n.isLoading,a=n.handleSubmit,i=n.handleAddContact,s=n.contactValidation;return(0,V.jsxs)(y,{children:[(0,V.jsx)(k,{children:"Phonebook"}),(0,V.jsx)(L,{children:(0,V.jsxs)(j.Z,{sx:{padding:4,bgcolor:"#fff",borderRadius:2,boxShadow:"rgb(0 0 0 / 20%) 0px 2px 4px"},children:[(0,V.jsx)(g.ZP,{}),(0,V.jsx)(j.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,V.jsxs)(j.Z,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:a(i),textAlign:"center",children:[(0,V.jsxs)(v.ZP,{container:!0,spacing:2,children:[(0,V.jsx)(v.ZP,{item:!0,xs:12,children:(0,V.jsx)(b.Qr,{control:t,name:"name",render:function(n){var t=n.field,o=t.ref,a=(0,f.Z)(t,H);return(0,V.jsx)(Z.Z,(0,p.Z)((0,p.Z)((0,p.Z)({},a),{},{inputRef:o,type:"text",name:"name",fullWidth:!0,id:"name",label:"Name",variant:"standard"},e("name",s.name)),{},{error:Boolean(r.name),helperText:(null===r||void 0===r?void 0:r.name)&&r.name.message,required:!0}))}})}),(0,V.jsx)(v.ZP,{item:!0,xs:12,children:(0,V.jsx)(b.Qr,{control:t,name:"number",render:function(n){var t=n.field,o=t.ref,a=(0,f.Z)(t,J);return(0,V.jsx)(Z.Z,(0,p.Z)((0,p.Z)((0,p.Z)({},a),{},{inputRef:o,fullWidth:!0,name:"number",label:"Phone",type:"tel",id:"number",variant:"standard"},e("number",s.number)),{},{error:Boolean(r.number),helperText:(null===r||void 0===r?void 0:r.number)&&r.number.message,required:!0}))}})})]}),(0,V.jsx)(h.Z,{type:"submit",variant:"contained",fullWidth:!0,disabled:"add"===o,sx:{mt:5,bgcolor:"#32a5cf"},children:"add"===o?(0,V.jsx)($,{size:22}):(0,V.jsx)("span",{children:"Add contact"})})]})})]})})]})},nn=r(885),en=r(4919),rn=r(3400),tn=r(7247),on=C.Z.li(E||(E=(0,w.Z)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  margin-bottom: 8px;\n  padding: 12px 8px;\n  line-height: 1.4em;\n  border-radius: 4px;\n  box-shadow: rgb(0 0 0 / 20%) 0px 3px 1px -2px,\n    rgb(0 0 0 / 14%) 0px 2px 2px 0px, rgb(0 0 0 / 12%) 0px 1px 5px 0px;\n"]))),an=C.Z.span(F||(F=(0,w.Z)(["\n  flex-basis: 50%;\n  font-weight: 600;\n  overflow-wrap: break-word;\n"]))),sn=C.Z.span(T||(T=(0,w.Z)(["\n  max-width: 35%;\n  overflow-wrap: break-word;\n"]))),dn=r(6960),ln=r(4164),cn=C.Z.div(K||(K=(0,w.Z)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.5);\n"]))),un=r(890),mn=r(4942),xn=function(n){var e=function(n){var e=n.id,r=n.onClose,t=(0,Y.I0)(),o=(0,Y.v9)(X),a=o.find((function(n){return n.id===e})),i=a.name,s=a.number,d=(0,B.useState)({name:i,number:s}),l=(0,nn.Z)(d,2),c=l[0],u=l[1],m=o.reduce((function(n,r){return r.id===e&&(n=r.name),n}),{});return{inputs:c,handleSubmit:function(n){n.preventDefault(),-1!==o.findIndex((function(n){return n.name.toLowerCase()===c.name.toLowerCase()}))&&m!==c.name?(0,O.K2)("".concat(c.name," is already in contacts ")):((c.name.trim()!==i||c.number!==s)&&t(Q.r.editContact((0,p.Z)({id:e},c))),r())},handleChange:function(n){var e=n.target.name,r=n.target.value;u((function(n){return(0,p.Z)((0,p.Z)({},n),{},(0,mn.Z)({},e,r))}))}}}({id:n.id,onClose:n.onClose}),r=e.inputs,t=e.handleSubmit,o=e.handleChange;return(0,V.jsxs)(j.Z,{padding:{xs:3},sx:{bgcolor:"#fff",borderRadius:2,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[(0,V.jsx)(un.Z,{component:"h2",variant:"h6",sx:{textAlign:"center",marginBottom:2},children:"Edit contact"}),(0,V.jsxs)(j.Z,{component:"form",textAlign:"center",onSubmit:t,children:[(0,V.jsxs)(v.ZP,{container:!0,spacing:2,children:[(0,V.jsx)(v.ZP,{item:!0,xs:12,children:(0,V.jsx)(Z.Z,{required:!0,type:"text",fullWidth:!0,id:"name",label:"Name",name:"name",onChange:o,value:r.name,variant:"standard"})}),(0,V.jsx)(v.ZP,{item:!0,xs:12,children:(0,V.jsx)(Z.Z,{required:!0,type:"tel",fullWidth:!0,id:"number",label:"Number",name:"number",onChange:o,value:r.number,variant:"standard",onKeyPress:function(n){return!/[0-9]/.test(n.key)&&n.preventDefault()}})})]}),(0,V.jsx)(h.Z,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:3,bgcolor:"#32a5cf"},children:"Confirm"})]})]})},pn=function(n){var e=n.onClose,r=n.id;(0,B.useEffect)((function(){var n=function(n){"Escape"===n.code&&e()};return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}),[e]);return(0,ln.createPortal)((0,V.jsx)(cn,{onClick:function(n){n.target===n.currentTarget&&e()},children:(0,V.jsx)(xn,{id:r,onClose:e})}),document.querySelector("#modal-root"))},fn=function(n){var e=n.id,r=n.name,t=n.number,o=(0,Y.I0)(),a=(0,Y.v9)(G),i=(0,B.useState)(!1),s=(0,nn.Z)(i,2),d=s[0],l=s[1],c=function(){return l((function(n){return!n}))};return(0,B.useEffect)((function(){return function(){a===e&&((0,O.K2)("You have removed ".concat(r," from your list ")),o(Q.r.setIsLoading()))}}),[o,e,a,r]),(0,V.jsxs)(on,{children:[(0,V.jsxs)(an,{children:[r,":"]}),(0,V.jsx)(sn,{children:t}),(0,V.jsx)(rn.Z,{sx:{position:"absolute",right:"15%","&:hover, &:focus":{bgcolor:"#d7f0d0",color:"#468d46"}},"aria-label":"edit",type:"button",onClick:c,children:(0,V.jsx)(en.Z,{})}),(0,V.jsx)(rn.Z,{sx:{position:"absolute",right:"2%","&:hover, &:focus":{bgcolor:"#f3dacf",color:"#d31616"}},"aria-label":"delete",type:"button",disabled:a===e,loading:a===e?1:0,onClick:function(){return n=e,void o(dn.GK(n));var n},children:(0,V.jsx)(tn.Z,{})}),d&&(0,V.jsx)(pn,{onClose:c,id:e})]})},bn=r(3628),hn=C.Z.label(N||(N=(0,w.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 16px;\n  margin-bottom: 16px;\n"]))),gn=C.Z.p(W||(W=(0,w.Z)(["\n  margin-bottom: 2px;\n  color: rgba(0, 0, 0, 0.54);\n"]))),Zn=(0,C.Z)(bn.DebounceInput)(_||(_=(0,w.Z)(["\n  display: block;\n  height: calc(2.5rem + 2px);\n  width: 70%;\n  margin-bottom: 8px;\n  padding: 1rem 0.75rem;\n  font-size: 1.1rem;\n  line-height: 1.25;\n  color: #212529;\n  background-clip: padding-box;\n  border: 1px solid #bdbdbd;\n  border-radius: 0.25rem;\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n  appearance: none;\n\n  &:focus {\n    background-color: rgba(0, 0, 0, 0.03);\n    border-color: #bdbdbd;\n    outline: 0;\n    box-shadow: 0 0 0 0.1rem rgba(158, 158, 158, 0.25);\n  }\n"]))),vn=function(n){var e=n.value,r=n.onChange;return(0,V.jsxs)(hn,{children:[(0,V.jsx)(gn,{children:"Find contacts by name"}),(0,V.jsx)(Zn,{debounceTimeout:300,type:"text",value:e,onChange:function(n){return r(n.target.value)},name:"filter"})]})},jn=r(3478),wn=C.Z.section(D||(D=(0,w.Z)(["\n  margin-top: 48px;\n  text-align: center;\n\n  @media screen and (min-width: 720px) {\n    margin-top: 60px;\n  }\n"]))),Cn=C.Z.div(R||(R=(0,w.Z)(["\n  max-width: 380px;\n  margin: 0 auto;\n  padding: 0 12px;\n\n  @media screen and (min-width: 450px) {\n    max-width: 580px;\n    padding: 0 24px;\n  }\n"]))),yn=function(){var n=function(){var n=(0,B.useState)(""),e=(0,nn.Z)(n,2),r=e[0],t=e[1],o=(0,Y.v9)(X),a=(0,Y.I0)(),i=(0,Y.v9)(G),s=(0,Y.v9)(M);return(0,B.useEffect)((function(){a(dn.K2())}),[a]),(0,B.useEffect)((function(){"editSuccess"===i&&((0,O.s$)("Successfully changed"),a(Q.r.setIsLoading())),s&&(0,O.x2)("Oops, something went wrong. Please try again")}),[a,i,s]),{FilteredContacts:(0,B.useMemo)((function(){var n=r.toLowerCase().trim();return o.filter((function(e){return e.name.toLowerCase().includes(n)}))}),[r,o]),filter:r,setFilter:t}}(),e=n.FilteredContacts,r=n.filter,t=n.setFilter,o=(0,Y.v9)(G),a=0===e.length&&"fetch"!==o;return(0,V.jsxs)(wn,{children:[(0,V.jsx)("h2",{children:"Contacts"}),(0,V.jsxs)(Cn,{children:["fetch"===o?(0,V.jsx)(jn.u3,{}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(vn,{value:r,onChange:t}),(0,V.jsx)("ul",{children:e.length>0&&e.map((function(n){var e=n.id,r=n.name,t=n.number;return(0,V.jsx)(fn,{name:r,number:t,id:e},e)}))})]}),a&&(0,V.jsx)(O.P_,{status:"warning",children:"No contacts found"})]})]})},kn=function(){return(0,V.jsxs)("div",{children:[(0,V.jsx)(U,{}),(0,V.jsx)(yn,{})]})}}}]);
//# sourceMappingURL=278.77bdba34.chunk.js.map